## Network > Load Balancer > 개요

TOAST는 소프트웨어 방식의 로드 밸런서를 제공합니다. 로드 밸런서를 이용하면,

- 인스턴스 하나로 처리하기 힘든 서비스 부하를 여러 대의 인스턴스로 분산 처리를 할 수 있습니다.
- 인스턴스 하나에 장애가 발생한 경우에는 로드 밸런서가 해당 인스턴스를 맴버에서 제거하여 장애를 최소화 합니다.
- 로드 밸런서는 서비스 부하를 쉽게 예측하기 어려운 신규 서비스의 경우에 급증하는 서비스 요청에 빠르게 대처할 수 있게 해 줍니다.
- 반대로 서비스 부하가 낮아지면 등록된 인스턴스를 제거하여 불필요한 비용을 줄일 수 있습니다. 

로드 밸런서는 격리된 네트워크 단위인 VPC에 생성합니다. 로드 밸런서는 단일 접속 경로인 프라이빗 VIP (virtual IP)로 유입되는 네트워크 트래픽을 맴버로 등록된 인스턴스로 분산해 줍니다. TOAST 로드 밸런서는 다음 프로토콜에 대해서 네트워크 트래픽을 분산해 줍니다.

* HTTP, HTTPS
* TCP
* Terminated_HTTPS: 

TOAST는 다양한 로드 밸런싱 알고리즘을 지원하며, 설정에 따라 네트워크 트래픽을 효과적으로 분산해 줍니다.
TOAST 로드 밸런서가 지원하는 로드 밸런싱 알고리즘은 다음과 같습니다.

* 라운드 로빈 (Round Robin): 로드 밸런서에 등록된 인스턴스에 우선 순위 없이 네트워크 트래픽을 골고루 동일하게 분산시켜 줍니다. 다양한 사용자의 요청 각각이 시스템에 주는 부하가 비슷한 경우에 사용하는 간단한 로드 밸런싱 알고리즘 입니다.
* 최소 네트워크 연결 수 (Least connections): 현재 네트워크 연결 수가 가장 작은 인스턴스로 네트워크 트래픽을 전달합니다. 로드 밸런서에 등록된 인스턴스의 사양이 다양하거나 사용자 요청에 따라 시스템에 주는 부하 차이가 클 때, 네트워크 연결의 수가 많다는 것은 그만큼 처리하고 있는 부하가 크다는 것을 의미합니다. 이 때, 최소 네트워크 연결 수 방식으로 부하 분산을 하면 전체 서비스 처리 부하를 각 인스턴스의 처리량에 맞춰서 분산시켜주므로 효과적으로 대용량 서비스를 할 수 있습니다.
* 원본 IP: 서비스 사용자의 원본 IP를 기준으로 부하 분산을 하게 되면, 동일한 IP에서 들어오는 모든 네트워크 트래픽은 동일한 인스턴스로 전달됩니다. 한 사용자에 대한 처리를 똑같은 인스턴스에서 처리하고자 할 때 사용하면 유용합니다. 서비스 개발자는 로드 밸런서 사용을 고려할 필요 없이 서버 하나로 서비스할 때와 동일하게 서비스를 개발할 수 있습니다.

TOAST 로드 밸런서는 인스턴스의 정상 동작 상태 확인을 할 때 TCP, HTTP, HTTPS 프로토콜을 이용합니다. 서비스하시는 프로토콜에 따라 적절한 프로토콜을 지정하여 사용하세요.

(???) TOAST 로드 밸런서는 소스 IP나 쿠키로 세션을 인식하여, 한 세션에서 발생한 트래픽은 항상 같은 인스턴스로 분산시켜줄 수 있습니다. 서비스 개발자는 로드 밸런서를 고려하지 않고 서비스를 구현할 수 있게 됩니다.

### TOAST 로드 밸런서가 제공하지 않는 기능

* TCP 포트와 같이 L4 계층의 정보를 이용한 부하 분산
* DSR (Direct server return)

### 플로팅 IP 연결

로드 밸런서의 VIP에 플로팅 IP를 연결할 수 있습니다. 이를 통해 외부로 노출하는 서비스에 직접 로드 밸런서를 사용하여 가용성을 높이고 급증하는 서비스 부하도 대비할 수 있습니다.

### 과금

로드 밸런서 사용 요금은 네트워크 사용 요금과 별도로 로드 밸런서 사용 시간에 따라 과금됩니다.
